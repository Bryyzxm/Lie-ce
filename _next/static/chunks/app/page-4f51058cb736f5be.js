(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2926:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(5155),s=t(2115);function o(e){let{products:r,setProducts:t}=e,[o,n]=(0,s.useState)({id:"",name:"",stock:"",price:"",modalPrice:"",exp:"",code:""}),[d,l]=(0,s.useState)(null),c=e=>{n({...o,[e.target.name]:e.target.value})},i=e=>{let t=r.find(r=>r.id===e);t&&(n({id:t.id,name:t.name,stock:t.stock.toString(),price:t.price.toString(),modalPrice:t.modalPrice.toString(),exp:t.exp,code:t.code}),l(e))},m=e=>{confirm("Are you sure you want to delete this product?")&&t(r.filter(r=>r.id!==e))};return(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6 border-b border-gray-300 pb-2",children:"Manage Products"}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!o.name)return;let a={id:null!=d?d:crypto.randomUUID(),name:o.name,stock:Number(o.stock),price:Number(o.price),modalPrice:Number(o.modalPrice),exp:o.exp,code:o.code};d?(t(r.map(e=>e.id===d?a:e)),l(null)):t([...r,a]),n({id:"",name:"",stock:"",price:"",modalPrice:"",exp:"",code:""})},className:"mb-6 grid grid-cols-1 sm:grid-cols-6 gap-4",children:[(0,a.jsx)("input",{type:"text",name:"name",placeholder:"Product Name",value:o.name,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",required:!0}),(0,a.jsx)("input",{type:"number",name:"stock",placeholder:"Stock",value:o.stock,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",min:0,required:!0}),(0,a.jsx)("input",{type:"number",name:"price",placeholder:"Price",value:o.price,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",min:0,required:!0}),(0,a.jsx)("input",{type:"number",name:"modalPrice",placeholder:"Harga Modal",value:o.modalPrice,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",min:0,required:!0}),(0,a.jsx)("input",{type:"text",name:"code",placeholder:"Product Code",value:o.code,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",required:!0}),(0,a.jsx)("input",{type:"text",name:"exp",placeholder:"Exp Product",value:o.exp,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",required:!0}),(0,a.jsx)("button",{type:"submit",className:"bg-black text-white rounded px-6 py-3 hover:bg-gray-900 transition font-semibold",children:d?"Update":"Add"})]}),(0,a.jsxs)("table",{className:"w-full border-collapse border border-gray-300 shadow-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Name"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Stock"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Price"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Harga Modal"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Code"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Exp Product"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[r.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.name}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.stock}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.price.toLocaleString()}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.modalPrice.toLocaleString()}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.code}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.exp}),(0,a.jsxs)("td",{className:"border border-gray-300 p-3 space-x-4",children:[(0,a.jsx)("button",{onClick:()=>i(e.id),className:"text-blue-600 hover:underline font-semibold",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>m(e.id),className:"text-red-600 hover:underline font-semibold",children:"Delete"})]})]},e.id)),0===r.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"text-center p-6 text-gray-500 italic",children:"No products available."})})]})]})]})}function n(e){let{products:r,transactions:t,setTransactions:o,setProducts:n}=e,[d,l]=(0,s.useState)({date:new Date().toISOString().slice(0,10),productId:"",quantity:""}),c=e=>{l({...d,[e.target.name]:e.target.value})},i=e=>{let a=t.find(r=>r.id===e);a&&(n(r.map(e=>e.id===a.productId?{...e,stock:e.stock+a.quantity}:e)),o(t.filter(r=>r.id!==e)))};return(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6 border-b border-gray-300 pb-2",children:"Record Sales Transaction"}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!d.productId||!d.quantity)return;let a=r.find(e=>e.id===d.productId);if(!a)return;let s=Number(d.quantity);if(s<=0||s>a.stock)return void alert("Invalid quantity or insufficient stock");let c=s*a.price;o([...t,{id:crypto.randomUUID(),date:d.date,productId:d.productId,quantity:s,total:c}]),n(r.map(e=>e.id===d.productId?{...e,stock:e.stock-s}:e)),l({...d,productId:"",quantity:""})},className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("input",{type:"date",name:"date",value:d.date,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",required:!0}),(0,a.jsxs)("select",{name:"productId",value:d.productId,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Product"}),r.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (Stock: ",e.stock,")"]},e.id))]}),(0,a.jsx)("input",{type:"number",name:"quantity",placeholder:"Quantity",value:d.quantity,onChange:c,className:"border border-gray-400 p-3 rounded focus:outline-none focus:ring-2 focus:ring-black transition",min:1,required:!0}),(0,a.jsx)("button",{type:"submit",className:"bg-black text-white rounded px-6 py-3 hover:bg-gray-900 transition font-semibold",children:"Add Transaction"})]}),(0,a.jsxs)("table",{className:"w-full border-collapse border border-gray-300 shadow-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Date"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Product"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Quantity"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Total"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[t.map(e=>{let t=r.find(r=>r.id===e.productId);return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.date}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:t?t.name:"Unknown"}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.quantity}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.total.toLocaleString()}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:(0,a.jsx)("button",{onClick:()=>i(e.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition","aria-label":"Delete transaction",children:"Delete"})})]},e.id)}),0===t.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center p-6 text-gray-500 italic",children:"No transactions recorded."})})]})]})]})}function d(e){let{products:r}=e;return(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6 border-b border-gray-300 pb-2",children:"Stock Overview"}),(0,a.jsxs)("table",{className:"w-full border-collapse border border-gray-300 shadow-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Product"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Stock Remaining"}),(0,a.jsx)("th",{className:"border border-gray-300 p-3 text-left font-medium",children:"Status"})]})}),(0,a.jsxs)("tbody",{children:[r.map(e=>{let r=e.stock<5;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.name}),(0,a.jsx)("td",{className:"border border-gray-300 p-3",children:e.stock}),(0,a.jsx)("td",{className:"border border-gray-300 p-3 font-semibold ".concat(r?"text-red-600":"text-green-600"),children:r?"Low Stock":"Sufficient"})]},e.id)}),0===r.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"text-center p-6 text-gray-500 italic",children:"No products available."})})]})]})]})}function l(e){return e.reduce((e,r)=>e+r.total,0)}function c(e,r){return e.reduce((e,t)=>e+function(e,r){let t=r.find(r=>r.id===e.productId);return t?(t.price-t.modalPrice)*e.quantity:0}(t,r),0)}function i(e,r,t){return e.filter(e=>{let a=new Date(e.date);return a>=r&&a<=t})}function m(e){let{transactions:r,products:t}=e,s=new Date,o=i(r,new Date(s.getFullYear(),s.getMonth(),s.getDate()),s),n=l(o),d=c(o,t),m=new Date(s);m.setDate(s.getDate()-6);let u=i(r,m,s),b=l(u),x=c(u,t),p=i(r,new Date(s.getFullYear(),s.getMonth(),1),s),g=l(p),h=c(p,t);return(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6 border-b border-gray-300 pb-2",children:"Sales Reports"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"p-6 border rounded-lg shadow-md bg-gray-50 flex flex-col items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Daily Sales"}),(0,a.jsxs)("p",{className:"text-3xl font-extrabold",children:["Rp ",n.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[o.length," transactions"]}),(0,a.jsxs)("p",{className:"text-lg text-green-600 mt-2",children:["Profit: Rp ",d.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"p-6 border rounded-lg shadow-md bg-gray-50 flex flex-col items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Weekly Sales"}),(0,a.jsxs)("p",{className:"text-3xl font-extrabold",children:["Rp ",b.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[u.length," transactions"]}),(0,a.jsxs)("p",{className:"text-lg text-green-600 mt-2",children:["Profit: Rp ",x.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"p-6 border rounded-lg shadow-md bg-gray-50 flex flex-col items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Monthly Sales"}),(0,a.jsxs)("p",{className:"text-3xl font-extrabold",children:["Rp ",g.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[p.length," transactions"]}),(0,a.jsxs)("p",{className:"text-lg text-green-600 mt-2",children:["Profit: Rp ",h.toLocaleString()]})]})]})]})}function u(e){let{transactions:r,products:t}=e,s=()=>[["Transaction ID","Date","Product Name","Product ID","Product Found","Quantity","Price","Modal Price","Total","Profit"],...r.map(e=>{let r=t.find(r=>r.id===e.productId),a=r?r.name:"Unknown",s=r?r.price:0,o=r?r.modalPrice:0,n=(s-o)*e.quantity,d=r?"Yes":"No";return[e.id,e.date,a,e.productId,d,e.quantity.toString(),s.toString(),o.toString(),e.total.toString(),n.toString()]})].map(e=>e.join(";")).join("\n");return(0,a.jsx)("section",{className:"mb-8",children:(0,a.jsx)("button",{onClick:()=>{let e=new Blob([s()],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(e),t=document.createElement("a");t.href=r,t.setAttribute("download","sales_data.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"bg-black text-white rounded px-6 py-3 hover:bg-gray-900 transition font-semibold",children:"Export Sales Data to CSV"})})}function b(e){let{searchTerm:r,setSearchTerm:t}=e;return(0,a.jsx)("section",{className:"mb-6",children:(0,a.jsx)("input",{type:"text",placeholder:"Search products by name or code...",value:r,onChange:e=>t(e.target.value),className:"w-full border border-gray-300 rounded p-2"})})}function x(){let[e,r]=(0,s.useState)([]),[t,l]=(0,s.useState)([]),[c,i]=(0,s.useState)("");(0,s.useEffect)(()=>{var e,t;let a=JSON.parse(null!=(e=localStorage.getItem("products"))?e:"[]"),s=JSON.parse(null!=(t=localStorage.getItem("transactions"))?t:"[]");r(a),l(s)},[]),(0,s.useEffect)(()=>{localStorage.setItem("products",JSON.stringify(e))},[e]),(0,s.useEffect)(()=>{localStorage.setItem("transactions",JSON.stringify(t))},[t]);let x=e.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.code.toLowerCase().includes(c.toLowerCase()));return(0,a.jsxs)("main",{className:"min-h-screen bg-white text-black p-6 max-w-7xl mx-auto space-y-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-extrabold mb-8 tracking-tight",children:"Lie ce - Stock & Sales Management"}),(0,a.jsx)(b,{searchTerm:c,setSearchTerm:i}),(0,a.jsx)(o,{products:x,setProducts:r}),(0,a.jsx)(n,{products:e,transactions:t,setTransactions:l,setProducts:r}),(0,a.jsx)(d,{products:e}),(0,a.jsx)(m,{transactions:t,products:e}),(0,a.jsx)(u,{transactions:t,products:e})]})}},8263:(e,r,t)=>{Promise.resolve().then(t.bind(t,2926))}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(8263)),_N_E=e.O()}]);